# Ersetze mit deiner Domain oder IP
# Fuer Domain mit automatischem HTTPS:
#   SITE_ADDRESS=scraper.deine-domain.de
# Fuer erstmal nur IP (kein HTTPS):
#   SITE_ADDRESS=:80

{$SITE_ADDRESS:localhost} {
    # Basic Auth - Passwort-Hash generieren mit:
    #   docker run --rm caddy:2-alpine caddy hash-password --plaintext DEIN_PASSWORT
    basic_auth * {
        {$AUTH_USER} {$AUTH_PASSWORD_HASH}
    }

    # Reverse Proxy zu FastAPI
    reverse_proxy api:8000

    # Logging
    log {
        output stdout
        format console
    }

    # Security Headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        Referrer-Policy strict-origin-when-cross-origin
        -Server
    }
}
